# –°–∏—Å—Ç–µ–º–∞ –ë–æ—é - –ü–æ–≤–Ω–∞ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## –û–≥–ª—è–¥

–°–∏—Å—Ç–µ–º–∞ –±–æ—é –≤ Pomyyka - —Ü–µ –ø–æ–∫—Ä–æ–∫–æ–≤–∞ –±–æ–π–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞, —è–∫–∞ –ø–æ—î–¥–Ω—É—î –º–µ—Ö–∞–Ω—ñ–∫–∏ –∑ —Ä—ñ–∑–Ω–∏—Ö –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö —ñ–≥–æ—Ä:

- **D&D (Dungeons & Dragons)**: –∫–∏–¥–∫–∏ d20, –∫–ª–∞—Å –±—Ä–æ–Ω—ñ (AC), —ñ–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∞
- **Hearthstone**: —Å–∏—Å—Ç–µ–º–∞ –µ–Ω–µ—Ä–≥—ñ—ó/–º–∞–Ω–∏ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –∑–±—ñ–ª—å—à–µ–Ω–Ω—è–º –∫–æ–∂–µ–Ω —Ö—ñ–¥
- **Pokemon**: –∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∫–∞ —Ç–∞ —Ä–µ–∑–µ—Ä–≤ (bench), —Ç–∏–ø–∏ –∞—Ç–∞–∫ —Ç–∞ —Å–ª–∞–±–∫–æ—Å—Ç—ñ

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –°–∏—Å—Ç–µ–º–∏

### –û—Å–Ω–æ–≤–Ω—ñ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

#### 1. BattleState (–°—Ç–∞–Ω –ë–æ—é)
–ü–æ–≤–Ω–∏–π —Å—Ç–∞–Ω –±–æ–π–æ–≤–æ—ó —Å–µ—Å—ñ—ó, —â–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ Redis.

**–ü–æ–ª—è:**
- `session_id`: –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —Å–µ—Å—ñ—ó
- `chat_id`: ID —á–∞—Ç—É, –¥–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –±—ñ–π
- `message_id`: ID –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –±–æ—é
- `phase`: –ü–æ—Ç–æ—á–Ω–∞ —Ñ–∞–∑–∞ –±–æ—é (INITIATIVE, ACTION, END_TURN, FINISHED)
- `player1`, `player2`: –°—Ç–∞–Ω –æ–±–æ—Ö –≥—Ä–∞–≤—Ü—ñ–≤
- `active_player_idx`: –Ü–Ω–¥–µ–∫—Å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è (1 –∞–±–æ 2)
- `turn_number`: –ù–æ–º–µ—Ä —Ä–∞—É–Ω–¥—É (–∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è, –∫–æ–ª–∏ —Ö—ñ–¥ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –≥—Ä–∞–≤—Ü—è 1)
- `info_logs`: –û—Å—Ç–∞–Ω–Ω—ñ 5 –¥—ñ–π –±–æ—é (–ª–æ–≥)

#### 2. PlayerState (–°—Ç–∞–Ω –ì—Ä–∞–≤—Ü—è)
–°—Ç–∞–Ω –æ–∫—Ä–µ–º–æ–≥–æ –≥—Ä–∞–≤—Ü—è –ø—ñ–¥ —á–∞—Å –±–æ—é.

**–ü–æ–ª—è:**
- `user_id`: Telegram ID –≥—Ä–∞–≤—Ü—è
- `name`: –Ü–º'—è –≥—Ä–∞–≤—Ü—è
- `current_energy`: –ü–æ—Ç–æ—á–Ω–∞ –µ–Ω–µ—Ä–≥—ñ—è (–≤–∏—Ç—Ä–∞—á–∞—î—Ç—å—Å—è –Ω–∞ –¥—ñ—ó)
- `max_energy`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –µ–Ω–µ—Ä–≥—ñ—è (–∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è –∫–æ–∂–µ–Ω —Ö—ñ–¥, –º–∞–∫—Å–∏–º—É–º 10)
- `deck`: –°–ø–∏—Å–æ–∫ –∑ 3 –∫–∞—Ä—Ç–æ–∫ (CardState)
- `active_card_index`: –Ü–Ω–¥–µ–∫—Å –∞–∫—Ç–∏–≤–Ω–æ—ó –∫–∞—Ä—Ç–∫–∏ –≤ –∫–æ–ª–æ–¥—ñ

**–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:**
- `active_card`: –ü–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ç–æ—á–Ω—É –∞–∫—Ç–∏–≤–Ω—É –∫–∞—Ä—Ç–∫—É
- `alive_cards`: –ü–æ–≤–µ—Ä—Ç–∞—î —Å–ø–∏—Å–æ–∫ –∂–∏–≤–∏—Ö (–Ω–µ –∑–Ω–µ–ø—Ä–∏—Ç–æ–º–Ω—ñ–ª–∏—Ö) –∫–∞—Ä—Ç–æ–∫

#### 3. CardState (–°—Ç–∞–Ω –ö–∞—Ä—Ç–∫–∏)
–†–∞–Ω—Ç–∞–π–º-—Å—Ç–∞–Ω –∫–∞—Ä—Ç–∫–∏ –ø—ñ–¥ —á–∞—Å –±–æ—é.

**–ü–æ–ª—è:**
- `id`: UUID –∫–∞—Ä—Ç–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `template_id`: ID —à–∞–±–ª–æ–Ω—É –∫–∞—Ä—Ç–∫–∏
- `name`: –ù–∞–∑–≤–∞ –∫–∞—Ä—Ç–∫–∏
- `rarity`: –†—ñ–¥–∫—ñ—Å–Ω—ñ—Å—Ç—å
- `biome`: –ë—ñ–æ–º –∫–∞—Ä—Ç–∫–∏
- `current_hp`, `max_hp`: –ü–æ—Ç–æ—á–Ω–µ —Ç–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–µ –∑–¥–æ—Ä–æ–≤'—è
- `ac`: –ö–ª–∞—Å –±—Ä–æ–Ω—ñ (Armor Class) - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ø–∞–¥–∞–Ω–Ω—è
- `initiative_bonus`: –ë–æ–Ω—É—Å –¥–æ —ñ–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∏ (–∑–∞—Ä–∞–∑ –∑–∞–≤–∂–¥–∏ 0)
- `crit_chance`: –®–∞–Ω—Å –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ —É–¥–∞—Ä—É (–±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ MEME —Å—Ç–∞—Ç—ñ)
- `is_fainted`: –ß–∏ –∑–Ω–µ–ø—Ä–∏—Ç–æ–º–Ω—ñ–ª–∞ –∫–∞—Ä—Ç–∫–∞
- `status_effects`: –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç—É—Å–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤
- `attacks`: –°–ø–∏—Å–æ–∫ –∞—Ç–∞–∫ (–∫–æ–ø—ñ—è –∑ —à–∞–±–ª–æ–Ω—É)
- `weakness`: –°–ª–∞–±–∫—ñ—Å—Ç—å –∫–∞—Ä—Ç–∫–∏ (—Ç–∏–ø –∞—Ç–∞–∫–∏, —â–æ –∑–∞–≤–¥–∞—î x2 —à–∫–æ–¥–∏)
- `resistance`: –û–ø—ñ—Ä –∫–∞—Ä—Ç–∫–∏ (–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∑–∞—Ä–∞–∑)

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –°—Ç–∞—Ç—ñ–≤:**
- **HP**: `Def * 5 + 20` (Def –≤–∏—Å—Ç—É–ø–∞—î —è–∫ Constitution)
- **AC**: `10 + (Def // 2)` (–±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –±—Ä–æ–Ω—ñ + –ø–æ–ª–æ–≤–∏–Ω–∞ –∑–∞—Ö–∏—Å—Ç—É)

## –§–∞–∑–∏ –ë–æ—é

### 1. INITIATIVE (–Ü–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∞)
–ü–æ—á–∞—Ç–∫–æ–≤–∞ —Ñ–∞–∑–∞, –∫–æ–ª–∏ –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è, —Ö—Ç–æ —Ö–æ–¥–∏—Ç—å –ø–µ—Ä—à–∏–º.

**–ü—Ä–æ—Ü–µ—Å:**
1. –ö–æ–∂–µ–Ω –≥—Ä–∞–≤–µ—Ü—å –∫–∏–¥–∞—î d20 + –±–æ–Ω—É—Å —ñ–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∏
2. –ì—Ä–∞–≤–µ—Ü—å –∑ –≤–∏—â–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Ö–æ–¥–∏—Ç—å –ø–µ—Ä—à–∏–º
3. –ü—Ä–∏ —Ä—ñ–≤–Ω–æ—Å—Ç—ñ –ø–µ—Ä–µ–º–∞–≥–∞—î –≥—Ä–∞–≤–µ—Ü—å 1
4. –§–∞–∑–∞ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ ACTION

### 2. ACTION (–î—ñ—è)
–ê–∫—Ç–∏–≤–Ω–∏–π –≥—Ä–∞–≤–µ—Ü—å –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥—ñ—ó:
- –ê—Ç–∞–∫—É–≤–∞—Ç–∏ (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –æ–¥–Ω—É –∑ –∞—Ç–∞–∫ –∞–∫—Ç–∏–≤–Ω–æ—ó –∫–∞—Ä—Ç–∫–∏)
- –ó–º—ñ–Ω–∏—Ç–∏ –∞–∫—Ç–∏–≤–Ω—É –∫–∞—Ä—Ç–∫—É (–∫–æ—à—Ç—É—î 1 –µ–Ω–µ—Ä–≥—ñ—é)
- –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Ö—ñ–¥

### 3. END_TURN (–ö—ñ–Ω–µ—Ü—å –•–æ–¥—É)
–ü–µ—Ä–µ—Ö—ñ–¥–Ω–∞ —Ñ–∞–∑–∞ (–∑–∞—Ä–∞–∑ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–≤–Ω–æ).

### 4. FINISHED (–ó–∞–≤–µ—Ä—à–µ–Ω–æ)
–ë—ñ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –û–¥–∏–Ω –∑ –≥—Ä–∞–≤—Ü—ñ–≤ –ø–µ—Ä–µ–º—ñ–≥ (–≤—Å—ñ –π–æ–≥–æ –∫–∞—Ä—Ç–∫–∏ –∑–Ω–µ–ø—Ä–∏—Ç–æ–º–Ω—ñ–ª–∏).

## –ú–µ—Ö–∞–Ω—ñ–∫–∏ –ë–æ—é

### –°–∏—Å—Ç–µ–º–∞ –ï–Ω–µ—Ä–≥—ñ—ó

**Hearthstone-—Å—Ç–∏–ª—å:**
- –ö–æ–∂–µ–Ω –≥—Ä–∞–≤–µ—Ü—å –ø–æ—á–∏–Ω–∞—î –∑ 1 –µ–Ω–µ—Ä–≥—ñ—î—é
- –ö–æ–∂–µ–Ω —Ö—ñ–¥ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –µ–Ω–µ—Ä–≥—ñ—è –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è –Ω–∞ 1 (–¥–æ –º–∞–∫—Å–∏–º—É–º—É 10)
- –ï–Ω–µ—Ä–≥—ñ—è –ø–æ–≤–Ω—ñ—Å—Ç—é –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç—å—Å—è –Ω–∞ –ø–æ—á–∞—Ç–∫—É –∫–æ–∂–Ω–æ–≥–æ —Ö–æ–¥—É
- –ê—Ç–∞–∫–∏ –∫–æ—à—Ç—É—é—Ç—å –µ–Ω–µ—Ä–≥—ñ—é (–∑–∞–∑–Ω–∞—á–µ–Ω–æ –≤ `energy_cost`)

**–ü—Ä–∏–∫–ª–∞–¥:**
- –†–∞—É–Ω–¥ 1: 1/1 –µ–Ω–µ—Ä–≥—ñ—è
- –†–∞—É–Ω–¥ 2: 2/2 –µ–Ω–µ—Ä–≥—ñ—è
- –†–∞—É–Ω–¥ 3: 3/3 –µ–Ω–µ—Ä–≥—ñ—è
- ...
- –†–∞—É–Ω–¥ 10+: 10/10 –µ–Ω–µ—Ä–≥—ñ—è

### –°–∏—Å—Ç–µ–º–∞ –ê—Ç–∞–∫ (D&D –ú–µ—Ö–∞–Ω—ñ–∫–∞)

#### –ö–∏–¥–∞–Ω–Ω—è –Ω–∞ –ü–æ–ø–∞–¥–∞–Ω–Ω—è
1. –ì—Ä–∞–≤–µ—Ü—å –æ–±–∏—Ä–∞—î –∞—Ç–∞–∫—É
2. –°–∏—Å—Ç–µ–º–∞ –∫–∏–¥–∞—î d20 (20-–≥—Ä–∞–Ω–Ω–∏–π –∫—É–±–∏–∫)
3. –î–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –¥–æ–¥–∞—î—Ç—å—Å—è –±–∞–∑–æ–≤–∏–π –±–æ–Ω—É—Å (+2)
4. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Ä—ñ–≤–Ω—é—î—Ç—å—Å—è –∑ AC (Armor Class) –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
5. –Ø–∫—â–æ `(d20 + 2) >= AC` –∞–±–æ `d20 == 20` (–∫—Ä–∏—Ç–∏—á–Ω–∏–π —É–¥–∞—Ä) ‚Üí –ø–æ–ø–∞–¥–∞–Ω–Ω—è

**–§–æ—Ä–º—É–ª–∞:** `hit_roll = d20 + 2` (–±–∞–∑–æ–≤–∏–π –±–æ–Ω—É—Å –º–∞–π—Å—Ç–µ—Ä–Ω–æ—Å—Ç—ñ)

#### –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –®–∫–æ–¥–∏
1. –ë–∞–∑–æ–≤–∞ —à–∫–æ–¥–∞ –±–µ—Ä–µ—Ç—å—Å—è –∑ –∞—Ç–∞–∫–∏ (`damage`)
2. –Ø–∫—â–æ `damage` - —Ä—è–¥–æ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "2d6+3"), —Å–∏—Å—Ç–µ–º–∞ –∫–∏–¥–∞—î –∫—É–±–∏–∫–∏
3. –Ø–∫—â–æ –∫—Ä–∏—Ç–∏—á–Ω–∏–π —É–¥–∞—Ä (d20 == 20), —à–∫–æ–¥–∞ –ø–æ–¥–≤–æ—é—î—Ç—å—Å—è
4. –ó–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –º–Ω–æ–∂–Ω–∏–∫ —Å–ª–∞–±–∫–æ—Å—Ç—ñ (x2, —è–∫—â–æ —Ç–∏–ø –∞—Ç–∞–∫–∏ –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑—ñ —Å–ª–∞–±–∫—ñ—Å—Ç—é)
5. –§—ñ–Ω–∞–ª—å–Ω–∞ —à–∫–æ–¥–∞ –∑–∞–≤–¥–∞—î—Ç—å—Å—è –∫–∞—Ä—Ç—Ü—ñ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞

**–§–æ—Ä–º—É–ª–∞:**
```
–±–∞–∑–æ–≤–∞_—à–∫–æ–¥–∞ = roll_damage(attack.damage)
—è–∫—â–æ –∫—Ä–∏—Ç–∏—á–Ω–∏–π_—É–¥–∞—Ä:
    –±–∞–∑–æ–≤–∞_—à–∫–æ–¥–∞ *= 2
—è–∫—â–æ —Å–ª–∞–±–∫—ñ—Å—Ç—å:
    –±–∞–∑–æ–≤–∞_—à–∫–æ–¥–∞ *= 2
—Ñ—ñ–Ω–∞–ª—å–Ω–∞_—à–∫–æ–¥–∞ = –±–∞–∑–æ–≤–∞_—à–∫–æ–¥–∞
```

**–ü—Ä–∏–∫–ª–∞–¥:**
- –ê—Ç–∞–∫–∞ "2d6" (2 –∫—É–±–∏–∫–∏ –ø–æ 6 –≥—Ä–∞–Ω–µ–π)
- –ö–∏–¥–∞—î—Ç—å—Å—è: 4 + 5 = 9
- –ö—Ä–∏—Ç–∏—á–Ω–∏–π —É–¥–∞—Ä: 9 * 2 = 18
- –°–ª–∞–±–∫—ñ—Å—Ç—å: 18 * 2 = 36
- –§—ñ–Ω–∞–ª—å–Ω–∞ —à–∫–æ–¥–∞: 36

### –¢–∏–ø–∏ –ê—Ç–∞–∫ —Ç–∞ –°–ª–∞–±–∫–æ—Å—Ç—ñ

**–¢–∏–ø–∏ –∞—Ç–∞–∫:**
- PHYSICAL (—Ñ—ñ–∑–∏—á–Ω–∞)
- FIRE (–≤–æ–≥–æ–Ω—å)
- WATER (–≤–æ–¥–∞)
- GRASS (—Ç—Ä–∞–≤–∞)
- PSYCHIC (–ø—Å–∏—Ö–æ)
- TECHNO (—Ç–µ—Ö–Ω–æ)
- DARK (—Ç–µ–º—Ä—è–≤–∞)
- MEME (–º–µ–º)

**–°–ª–∞–±–∫–æ—Å—Ç—ñ:**
- –Ø–∫—â–æ —Ç–∏–ø –∞—Ç–∞–∫–∏ –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑—ñ —Å–ª–∞–±–∫—ñ—Å—Ç—é –∫–∞—Ä—Ç–∫–∏, —à–∫–æ–¥–∞ –ø–æ–¥–≤–æ—é—î—Ç—å—Å—è
- –ü—Ä–∏–∫–ª–∞–¥: –∫–∞—Ä—Ç–∫–∞ –∑—ñ —Å–ª–∞–±–∫—ñ—Å—Ç—é –¥–æ FIRE –æ—Ç—Ä–∏–º–∞—î x2 —à–∫–æ–¥–∏ –≤—ñ–¥ –≤–æ–≥–Ω—è–Ω–∏—Ö –∞—Ç–∞–∫

**–û–ø—ñ—Ä (Resistance):**
- –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –¥–≤–æ–º–∞ —Å–ø–æ—Å–æ–±–∞–º–∏:
  1. **–ü–ª–æ—Å–∫–µ –∑–º–µ–Ω—à–µ–Ω–Ω—è:** –Ø–∫—â–æ `resistance.reduction > 0`, —à–∫–æ–¥–∞ –∑–º–µ–Ω—à—É—î—Ç—å—Å—è –Ω–∞ —Ñ—ñ–∫—Å–æ–≤–∞–Ω—É –≤–µ–ª–∏—á–∏–Ω—É
  2. **–ú–Ω–æ–∂–Ω–∏–∫:** –Ø–∫—â–æ `reduction` –Ω–µ –≤–∫–∞–∑–∞–Ω–æ –∞–±–æ –¥–æ—Ä—ñ–≤–Ω—é—î 0, —à–∫–æ–¥–∞ –º–Ω–æ–∂–∏—Ç—å—Å—è –Ω–∞ 0.5 (x0.5)
- –ü—Ä–∏–∫–ª–∞–¥: –∫–∞—Ä—Ç–∫–∞ –∑ –æ–ø–æ—Ä–æ–º –¥–æ FIRE –∑ `reduction: 5` –æ—Ç—Ä–∏–º–∞—î –Ω–∞ 5 –º–µ–Ω—à–µ —à–∫–æ–¥–∏ –≤—ñ–¥ –≤–æ–≥–Ω—è–Ω–∏—Ö –∞—Ç–∞–∫

### –°—Ç–∞—Ç—É—Å–Ω—ñ –ï—Ñ–µ–∫—Ç–∏

–°—Ç–∞—Ç—É—Å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ö–æ–¥—É –≥—Ä–∞–≤—Ü—è (–ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è).

**–¢–∏–ø–∏ —Å—Ç–∞—Ç—É—Å–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤:**

1. **BURNED (–û–ø–µ—á–µ–Ω–∏–π)** üî•
   - –ó–∞–≤–¥–∞—î 10 —à–∫–æ–¥–∏ –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ö–æ–¥—É
   - –ó–∞–ª–∏—à–∞—î—Ç—å—Å—è –¥–æ –∫—ñ–Ω—Ü—è –±–æ—é (–ø–æ–∫–∏ –Ω–µ –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–æ)

2. **POISONED (–û—Ç—Ä—É—î–Ω–∏–π)** ‚ò†Ô∏è
   - –ó–∞–≤–¥–∞—î 10 —à–∫–æ–¥–∏ –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ö–æ–¥—É
   - –ó–∞–ª–∏—à–∞—î—Ç—å—Å—è –¥–æ –∫—ñ–Ω—Ü—è –±–æ—é

3. **FROZEN (–ó–∞–º–æ—Ä–æ–∂–µ–Ω–∏–π)** ‚ùÑÔ∏è
   - –ó–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–∞ –∫–∞—Ä—Ç—Ü—ñ (–º–æ–∂–µ –∑–∞–≤–∞–∂–∞—Ç–∏ –¥—ñ—è–º)
   - 20% —à–∞–Ω—Å —Ä–æ–∑—Ç–∞–Ω—É—Ç–∏ –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ö–æ–¥—É
   - –Ø–∫—â–æ —Ä–æ–∑—Ç–∞–Ω—É–≤, –µ—Ñ–µ–∫—Ç –∑–Ω–∏–∫–∞—î

4. **PARALYZED (–ü–∞—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π)** ‚ö°
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –∞—Ç–∞–∫–∏
   - 25% —à–∞–Ω—Å, —â–æ –∞—Ç–∞–∫–∞ –Ω–µ –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è (–µ–Ω–µ—Ä–≥—ñ—è –≤—Å–µ –æ–¥–Ω–æ –≤–∏—Ç—Ä–∞—á–∞—î—Ç—å—Å—è)
   - –ï—Ñ–µ–∫—Ç –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–∞ –∫–∞—Ä—Ç—Ü—ñ

5. **CONFUSED (–ó–±–µ–Ω—Ç–µ–∂–µ–Ω–∏–π)** üåÄ
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –∞—Ç–∞–∫–∏
   - 33% —à–∞–Ω—Å –∑–∞–≤–¥–∞—Ç–∏ —Å–æ–±—ñ 5 —à–∫–æ–¥–∏ –∑–∞–º—ñ—Å—Ç—å –∞—Ç–∞–∫–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
   - –ï–Ω–µ—Ä–≥—ñ—è –≤–∏—Ç—Ä–∞—á–∞—î—Ç—å—Å—è, –∞—Ç–∞–∫–∞ –Ω–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è
   - –ï—Ñ–µ–∫—Ç –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–∞ –∫–∞—Ä—Ç—Ü—ñ

6. **ASLEEP (–°–ø–∏—Ç—å)** üí§
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ö–æ–¥—É
   - 33% —à–∞–Ω—Å –ø—Ä–æ–∫–∏–Ω—É—Ç–∏—Å—è
   - –Ø–∫—â–æ —Å–ø–∏—Ç—å, –≥—Ä–∞–≤–µ—Ü—å –Ω–µ –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥—ñ—ó (–µ–Ω–µ—Ä–≥—ñ—è –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ 0)
   - –Ø–∫—â–æ –ø—Ä–æ–∫–∏–Ω—É–≤—Å—è, –µ—Ñ–µ–∫—Ç –∑–Ω–∏–∫–∞—î

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –í—Å—ñ —Å—Ç–∞—Ç—É—Å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ. BURNED, POISONED, FROZEN —Ç–∞ ASLEEP –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –≤ `resolve_status_effects()`, –∞ PARALYZED —Ç–∞ CONFUSED –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è –≤ `execute_attack()`.

### –ó–∞–º—ñ–Ω–∞ –ö–∞—Ä—Ç–æ–∫

–ì—Ä–∞–≤–µ—Ü—å –º–æ–∂–µ –∑–º—ñ–Ω–∏—Ç–∏ –∞–∫—Ç–∏–≤–Ω—É –∫–∞—Ä—Ç–∫—É –Ω–∞ —ñ–Ω—à—É –∑—ñ —Å–≤–æ—î—ó –∫–æ–ª–æ–¥–∏.

**–í–∏–º–æ–≥–∏:**
- –ö–æ—à—Ç—É—î 1 –µ–Ω–µ—Ä–≥—ñ—é
- –¶—ñ–ª—å–æ–≤–∞ –∫–∞—Ä—Ç–∫–∞ –Ω–µ –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ –∑–Ω–µ–ø—Ä–∏—Ç–æ–º–Ω—ñ–ª–æ—é
- –¶—ñ–ª—å–æ–≤–∞ –∫–∞—Ä—Ç–∫–∞ –Ω–µ –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ –≤–∂–µ –∞–∫—Ç–∏–≤–Ω–æ—é

**–ü—Ä–æ—Ü–µ—Å:**
1. –ì—Ä–∞–≤–µ—Ü—å –Ω–∞—Ç–∏—Å–∫–∞—î –∫–Ω–æ–ø–∫—É "–ó–∞–º—ñ–Ω–∞"
2. –û–±–∏—Ä–∞—î –∫–∞—Ä—Ç–∫—É –∑ —Ä–µ–∑–µ—Ä–≤—É
3. –ê–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∫–∞ –∑–º—ñ–Ω—é—î—Ç—å—Å—è
4. –ï–Ω–µ—Ä–≥—ñ—è –∑–º–µ–Ω—à—É—î—Ç—å—Å—è –Ω–∞ 1

### –£–º–æ–≤–∏ –ü–µ—Ä–µ–º–æ–≥–∏

–ë—ñ–π –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è, –∫–æ–ª–∏:
- –£ –æ–¥–Ω–æ–≥–æ –∑ –≥—Ä–∞–≤—Ü—ñ–≤ –≤—Å—ñ –∫–∞—Ä—Ç–∫–∏ –∑–Ω–µ–ø—Ä–∏—Ç–æ–º–Ω—ñ–ª–∏ (`is_fainted = True`)
- –ü–µ—Ä–µ–º–æ–∂–µ—Ü—å - –≥—Ä–∞–≤–µ—Ü—å, —É —è–∫–æ–≥–æ –∑–∞–ª–∏—à–∏–ª–∞—Å—è —Ö–æ—á–∞ –± –æ–¥–Ω–∞ –∂–∏–≤–∞ –∫–∞—Ä—Ç–∫–∞

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∑–∞–º—ñ–Ω–∞:**
- –ö–æ–ª–∏ –∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∫–∞ –∑–Ω–µ–ø—Ä–∏—Ç–æ–º–Ω—ñ–ª–∞, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–±–∏—Ä–∞—î –ø–µ—Ä—à—É –∂–∏–≤—É –∫–∞—Ä—Ç–∫—É –∑ –∫–æ–ª–æ–¥–∏
- –Ø–∫—â–æ –∂–∏–≤–∏—Ö –∫–∞—Ä—Ç–æ–∫ –Ω–µ–º–∞—î, –±—ñ–π –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è

## –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –°—Ç–∞–Ω—É

**–î–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è:**
- –°—Ç–∞–Ω –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (—ñ–º'—è, –µ–Ω–µ—Ä–≥—ñ—è, –∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∫–∞, HP, —Å—Ç–∞—Ç—É—Å–∏, AC)
- –í–ª–∞—Å–Ω–∏–π —Å—Ç–∞–Ω (—ñ–º'—è, –µ–Ω–µ—Ä–≥—ñ—è, –∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∫–∞, HP, —Å—Ç–∞—Ç—É—Å–∏, AC)
- –õ–æ–≥ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 3 –¥—ñ–π
- –ö–Ω–æ–ø–∫–∏ –∞—Ç–∞–∫ (–∑ —ñ–Ω–¥–∏–∫–∞—Ü—ñ—î—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ –∑–∞ –µ–Ω–µ—Ä–≥—ñ—î—é)
- –ö–Ω–æ–ø–∫–∞ –∑–∞–º—ñ–Ω–∏ –∫–∞—Ä—Ç–∫–∏
- –ö–Ω–æ–ø–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ö–æ–¥—É

**–î–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è:**
- –¢–µ —Å–∞–º–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É
- –¢—ñ–ª—å–∫–∏ –∫–Ω–æ–ø–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É

### –ö–Ω–æ–ø–∫–∏ –î—ñ–π

**–ê—Ç–∞–∫–∏:**
- –ö–æ–∂–Ω–∞ –∞—Ç–∞–∫–∞ –ø–æ–∫–∞–∑—É—î –Ω–∞–∑–≤—É —Ç–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å –µ–Ω–µ—Ä–≥—ñ—ó
- ‚úÖ - –∞—Ç–∞–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ (–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –µ–Ω–µ—Ä–≥—ñ—ó)
- ‚ùå - –∞—Ç–∞–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –µ–Ω–µ—Ä–≥—ñ—ó)

**–Ü–Ω—à—ñ –¥—ñ—ó:**
- üîÑ –ó–∞–º—ñ–Ω–∞ (N) - –∑–∞–º—ñ–Ω–∏—Ç–∏ –∞–∫—Ç–∏–≤–Ω—É –∫–∞—Ä—Ç–∫—É (N = –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞—Ä—Ç–æ–∫ —É —Ä–µ–∑–µ—Ä–≤—ñ)
- ‚è≠Ô∏è –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Ö—ñ–¥ - –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Ö—ñ–¥
- üîÑ –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å - –æ–Ω–æ–≤–∏—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–¥–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è)

## –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –î—ñ–π —É –ë–æ—é

### –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
1. –û–±–∏–¥–≤–∞ –≥—Ä–∞–≤—Ü—ñ –æ–±–∏—Ä–∞—é—Ç—å –ø–æ 3 –∫–∞—Ä—Ç–∫–∏
2. –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è `BattleState` –∑ –ø–æ—á–∞—Ç–∫–æ–≤–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
3. –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è `resolve_initiative()` –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–µ—Ä—à–æ–≥–æ —Ö–æ–¥—É
4. –°—Ç–∞–Ω –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ Redis
5. –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–æ—é

### –•—ñ–¥ –ì—Ä–∞–≤—Ü—è
1. **–ü–æ—á–∞—Ç–æ–∫ —Ö–æ–¥—É:**
   - –ï–Ω–µ—Ä–≥—ñ—è –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç—å—Å—è –¥–æ –º–∞–∫—Å–∏–º—É–º—É
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –µ–Ω–µ—Ä–≥—ñ—è –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è –Ω–∞ 1 (—è–∫—â–æ < 10)
   - –ó–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ (`resolve_status_effects()`)

2. **–î—ñ—ó –≥—Ä–∞–≤—Ü—è:**
   - –ì—Ä–∞–≤–µ—Ü—å –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥—ñ—ó (–∞—Ç–∞–∫–∞, –∑–∞–º—ñ–Ω–∞, –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ö–æ–¥—É)
   - –ö–æ–∂–Ω–∞ –¥—ñ—è –æ–Ω–æ–≤–ª—é—î —Å—Ç–∞–Ω —Ç–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å

3. **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ö–æ–¥—É:**
   - –ì—Ä–∞–≤–µ—Ü—å –Ω–∞—Ç–∏—Å–∫–∞—î "–ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Ö—ñ–¥"
   - –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `next_turn()`, —è–∫–∏–π –ø–µ—Ä–µ–º–∏–∫–∞—î –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è
   - –°—Ç–∞—Ç—É—Å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –Ω–æ–≤–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è

### –ê—Ç–∞–∫–∞
1. –ì—Ä–∞–≤–µ—Ü—å –æ–±–∏—Ä–∞—î –∞—Ç–∞–∫—É
2. –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –¥–æ—Å—Ç–∞—Ç–Ω—ñ—Å—Ç—å –µ–Ω–µ—Ä–≥—ñ—ó
3. –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è, —á–∏ –Ω–µ –∑–Ω–µ–ø—Ä–∏—Ç–æ–º–Ω—ñ–ª–∞ –∞—Ç–∞–∫—É—é—á–∞ –∫–∞—Ä—Ç–∫–∞
4. –ü–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏:
   - **CONFUSED:** 33% —à–∞–Ω—Å –∑–∞–≤–¥–∞—Ç–∏ —Å–æ–±—ñ 5 —à–∫–æ–¥–∏ (–µ–Ω–µ—Ä–≥—ñ—è –≤–∏—Ç—Ä–∞—á–∞—î—Ç—å—Å—è, –∞—Ç–∞–∫–∞ —Å–∫–∞—Å–æ–≤—É—î—Ç—å—Å—è)
   - **PARALYZED:** 25% —à–∞–Ω—Å, —â–æ –∞—Ç–∞–∫–∞ –Ω–µ –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è (–µ–Ω–µ—Ä–≥—ñ—è –≤–∏—Ç—Ä–∞—á–∞—î—Ç—å—Å—è)
5. –Ø–∫—â–æ –∞—Ç–∞–∫–∞ –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è:
   - –ï–Ω–µ—Ä–≥—ñ—è –≤–∏—Ç—Ä–∞—á–∞—î—Ç—å—Å—è
   - –ö–∏–¥–∞—î—Ç—å—Å—è d20 + 2 –Ω–∞ –ø–æ–ø–∞–¥–∞–Ω–Ω—è
6. –Ø–∫—â–æ –ø–æ–ø–∞–¥–∞–Ω–Ω—è:
   - –†–æ–∑—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è —à–∫–æ–¥–∞
   - –ó–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –º–Ω–æ–∂–Ω–∏–∫–∏ (–∫—Ä–∏—Ç–∏—á–Ω–∏–π —É–¥–∞—Ä, —Å–ª–∞–±–∫—ñ—Å—Ç—å)
   - –ó–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –æ–ø—ñ—Ä (–∑–º–µ–Ω—à–µ–Ω–Ω—è –∞–±–æ –º–Ω–æ–∂–Ω–∏–∫ x0.5)
   - –®–∫–æ–¥–∞ –∑–∞–≤–¥–∞—î—Ç—å—Å—è
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è, —á–∏ –∑–Ω–µ–ø—Ä–∏—Ç–æ–º–Ω—ñ–ª–∞ –∫–∞—Ä—Ç–∫–∞
   - –Ø–∫—â–æ —Ç–∞–∫, –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è —É–º–æ–≤–∞ –ø–µ—Ä–µ–º–æ–≥–∏ –∞–±–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∑–∞–º—ñ–Ω–∞
7. –û–Ω–æ–≤–ª—é—î—Ç—å—Å—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –°—Ç–∞–Ω—É

–°—Ç–∞–Ω –±–æ—é –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ Redis –∑ –∫–ª—é—á–µ–º `turn_battle:{session_id}`.

**–°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Pydantic `model_dump_json()` –¥–ª—è —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
- TTL –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —á–∞—Å –∂–∏—Ç—Ç—è —Å–µ—Å—ñ—ó

**–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è:**
- –ü—Ä–∏ –∫–æ–∂–Ω—ñ–π –¥—ñ—ó —Å—Ç–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –∑ Redis
- –ü—ñ—Å–ª—è –∑–º—ñ–Ω —Å—Ç–∞–Ω –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –Ω–∞–∑–∞–¥

## –í—ñ–¥–æ–º—ñ –ü—Ä–æ–±–ª–µ–º–∏ —Ç–∞ –û–±–º–µ–∂–µ–Ω–Ω—è

### 1. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ: –ï–º–æ–¥–∑—ñ –≤ –õ–æ–≥–∞—Ö
**–°—Ç–∞—Ç—É—Å:** –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ
- –†—è–¥–æ–∫ 356: `üîÑ` –∫–æ—Ä–µ–∫—Ç–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è
- –†—è–¥–æ–∫ 359: `üí®` –∫–æ—Ä–µ–∫—Ç–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è

### 2. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ: –û–ø—ñ—Ä (Resistance) –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- –û–ø—ñ—Ä —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—î –≤ `execute_attack()` (—Ä—è–¥–∫–∏ 327-334)
- –ü—ñ–¥—Ç—Ä–∏–º—É—î —è–∫ –ø–ª–æ—Å–∫–µ –∑–º–µ–Ω—à–µ–Ω–Ω—è (`reduction`), —Ç–∞–∫ —ñ –º–Ω–æ–∂–Ω–∏–∫ (x0.5)

### 3. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ: –ë–æ–Ω—É—Å –¥–æ –ü–æ–ø–∞–¥–∞–Ω–Ω—è –î–æ–¥–∞–Ω–æ
**–°—Ç–∞—Ç—É—Å:** –î–æ–¥–∞–Ω–æ –±–∞–∑–æ–≤–∏–π –±–æ–Ω—É—Å
- `hit_roll = d20 + 2` (—Ä—è–¥–æ–∫ 297)
- –ë–∞–∑–æ–≤–∏–π –±–æ–Ω—É—Å –º–∞–π—Å—Ç–µ—Ä–Ω–æ—Å—Ç—ñ +2

**–ú–∞–π–±—É—Ç–Ω—î –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:** –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –±–æ–Ω—É—Å –≤—ñ–¥ ATK —Å—Ç–∞—Ç—ñ –¥–ª—è –±—ñ–ª—å—à–æ—ó –≥–ª–∏–±–∏–Ω–∏.

### 4. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –°—Ç–∞–Ω—É –ê—Ç–∞–∫—É—é—á–æ—ó –ö–∞—Ä—Ç–∫–∏
**–°—Ç–∞—Ç—É—Å:** –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É
- –†—è–¥–∫–∏ 263-265: –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è `card_atk.is_fainted` –ø–µ—Ä–µ–¥ –∞—Ç–∞–∫–æ—é

### 5. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ: –°—Ç–∞—Ç—É—Å–Ω—ñ –ï—Ñ–µ–∫—Ç–∏ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ
**–°—Ç–∞—Ç—É—Å:** –í—Å—ñ —Å—Ç–∞—Ç—É—Å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ
- BURNED, POISONED, FROZEN, ASLEEP: –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –≤ `resolve_status_effects()`
- PARALYZED, CONFUSED: –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è –≤ `execute_attack()`

### 6. –ü–æ—Ä—è–¥–æ–∫ –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –°—Ç–∞—Ç—É—Å–Ω–∏—Ö –ï—Ñ–µ–∫—Ç—ñ–≤
**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:** –°—Ç–∞—Ç—É—Å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –ø—ñ—Å–ª—è `next_turn()`, —Ç–æ–±—Ç–æ –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ö–æ–¥—É –Ω–æ–≤–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è.

**–û—Ü—ñ–Ω–∫–∞:** –¶–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ - —Å—Ç–∞—Ç—É—Å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ –º–∞—é—Ç—å –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏—Å—è –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ö–æ–¥—É –≥—Ä–∞–≤—Ü—è, –ø–µ—Ä–µ–¥ –π–æ–≥–æ –¥—ñ—è–º–∏. –¶–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ–π –ª–æ–≥—ñ—Ü—ñ –ø–æ–∫—Ä–æ–∫–æ–≤–∏—Ö —ñ–≥–æ—Ä.

### 7. –Ü–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∞ –Ω–∞ –ö–æ–∂–µ–Ω –†–∞—É–Ω–¥
**–ü—Ä–æ–±–ª–µ–º–∞:** –Ü–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∞ –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –ø–æ—á–∞—Ç–∫—É –±–æ—é. –£ D&D —ñ–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∞ –∑–∞–∑–≤–∏—á–∞–π –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è –Ω–∞ –∫–æ–∂–µ–Ω —Ä–∞—É–Ω–¥.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –†–æ–∑–≥–ª—è–Ω—É—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —ñ–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∏ –Ω–∞ –∫–æ–∂–µ–Ω —Ä–∞—É–Ω–¥ –¥–ª—è –±—ñ–ª—å—à–æ—ó –¥–∏–Ω–∞–º—ñ—á–Ω–æ—Å—Ç—ñ. –ó–∞—Ä–∞–∑ —Ü–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞, –∞–ª–µ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è–º.

### 8. –ú–æ–∂–ª–∏–≤–∞ –ü—Ä–æ–±–ª–µ–º–∞: –í–∏—Ç—Ä–∞—Ç–∞ –ï–Ω–µ—Ä–≥—ñ—ó –ø—Ä–∏ –°—Ç–∞—Ç—É—Å–Ω–∏—Ö –ï—Ñ–µ–∫—Ç–∞—Ö
**–û–ø–∏—Å:** –ü—Ä–∏ CONFUSED —Ç–∞ PARALYZED –µ–Ω–µ—Ä–≥—ñ—è –≤–∏—Ç—Ä–∞—á–∞—î—Ç—å—Å—è –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –∞—Ç–∞–∫–∞ –Ω–µ –≤—ñ–¥–±—É–ª–∞—Å—è.

**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:** –¶–µ –º–æ–∂–µ –±—É—Ç–∏ –Ω–∞–≤–º–∏—Å–Ω–∏–º –¥–∏–∑–∞–π–Ω–æ–º (–µ–Ω–µ—Ä–≥—ñ—è –≤–∏—Ç—Ä–∞—á–∞—î—Ç—å—Å—è –Ω–∞ —Å–ø—Ä–æ–±—É), –∞–ª–µ –º–æ–∂–µ –∑–¥–∞–≤–∞—Ç–∏—Å—è –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∏–º –¥–ª—è –≥—Ä–∞–≤—Ü—ñ–≤.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –†–æ–∑–≥–ª—è–Ω—É—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –µ–Ω–µ—Ä–≥—ñ—ó, —è–∫—â–æ –∞—Ç–∞–∫–∞ –±—É–ª–∞ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∞ —Å—Ç–∞—Ç—É—Å–Ω–∏–º –µ—Ñ–µ–∫—Ç–æ–º, –∞–±–æ –∑–∞–ª–∏—à–∏—Ç–∏ —è–∫ —î –¥–ª—è –±–∞–ª–∞–Ω—Å—É.

## –ú–∞–π–±—É—Ç–Ω—ñ –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è

1. ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –û–ø–æ—Ä—É:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
2. **–ë–æ–Ω—É—Å –¥–æ –ü–æ–ø–∞–¥–∞–Ω–Ω—è –≤—ñ–¥ ATK:** –î–æ–¥–∞—Ç–∏ –±–æ–Ω—É—Å –≤—ñ–¥ ATK —Å—Ç–∞—Ç—ñ (–∑–∞—Ä–∞–∑ —î –±–∞–∑–æ–≤–∏–π +2)
3. ‚úÖ **–ü–æ–≤–Ω–∞ –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –°—Ç–∞—Ç—É—Å—ñ–≤:** –í—Å—ñ —Å—Ç–∞—Ç—É—Å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ
4. **–°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ê—Ç–∞–∫–∏:** –ê—Ç–∞–∫–∏, —â–æ –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å AC (—Å—Ç–∞—Ç—É—Å–Ω—ñ –∞—Ç–∞–∫–∏)
5. **–ë–æ–Ω—É—Å –Ü–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∏:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä–µ–∞–ª—å–Ω—ñ –±–æ–Ω—É—Å–∏ —ñ–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∏ –∑ –∫–∞—Ä—Ç–æ–∫ (–∑–∞—Ä–∞–∑ –∑–∞–≤–∂–¥–∏ 0)
6. **–ê–Ω—ñ–º–∞—Ü—ñ—ó —Ç–∞ –ï—Ñ–µ–∫—Ç–∏:** –í—ñ–∑—É–∞–ª—å–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
7. **–†–µ–∂–∏–º –°–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è:** –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—Ç–∏ –∑–∞ –±–æ—î–º –¥–ª—è —ñ–Ω—à–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
8. **–Ü–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∞ –Ω–∞ –ö–æ–∂–µ–Ω –†–∞—É–Ω–¥:** –í–∏–∑–Ω–∞—á–∞—Ç–∏ —ñ–Ω—ñ—Ü—ñ–∞—Ç–∏–≤—É –Ω–∞ –∫–æ–∂–µ–Ω —Ä–∞—É–Ω–¥ –∑–∞–º—ñ—Å—Ç—å –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—É
9. **–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –õ–æ–≥—ñ–∫–∏ –ï–Ω–µ—Ä–≥—ñ—ó:** –†–æ–∑–≥–ª—è–Ω—É—Ç–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –µ–Ω–µ—Ä–≥—ñ—ó –ø—Ä–∏ –±–ª–æ–∫—É–≤–∞–Ω–Ω—ñ –∞—Ç–∞–∫–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –î–µ—Ç–∞–ª—ñ

### –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- `pydantic`: –î–ª—è –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–∏—Ö —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- `aiogram`: –î–ª—è Telegram —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
- `redis`: –î–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É
- `database.enums`: –î–ª—è —Ç–∏–ø—ñ–≤ –∞—Ç–∞–∫, –±—ñ–æ–º—ñ–≤, —Å—Ç–∞—Ç—É—Å–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤

### –§–∞–π–ª–∏ –°–∏—Å—Ç–µ–º–∏
- `services/turn_battle.py`: –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –±–æ—é
- `handlers/turn_battle_handler.py`: –û–±—Ä–æ–±–Ω–∏–∫–∏ Telegram —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
- `services/session_manager.py`: –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏ —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è–º —Å—Ç–∞–Ω—É
- `tests/test_turn_battle.py`: Unit —Ç–µ—Å—Ç–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –î–∞–Ω–∏—Ö

**BattleState (JSON):**
```json
{
  "session_id": "uuid",
  "chat_id": 123,
  "message_id": 456,
  "phase": "action",
  "player1": {
    "user_id": 789,
    "name": "–ì—Ä–∞–≤–µ—Ü—å 1",
    "current_energy": 3,
    "max_energy": 3,
    "deck": [...],
    "active_card_index": 0
  },
  "player2": {...},
  "active_player_idx": 1,
  "turn_number": 2,
  "info_logs": [...]
}
```

## –í–∏—Å–Ω–æ–≤–æ–∫

–°–∏—Å—Ç–µ–º–∞ –±–æ—é Pomyyka - —Ü–µ —Å–∫–ª–∞–¥–Ω–∏–π —Ç–∞ —Ü—ñ–∫–∞–≤–∏–π –ø–æ—î–¥–Ω–∞–Ω–Ω—è –º–µ—Ö–∞–Ω—ñ–∫ –∑ —Ä—ñ–∑–Ω–∏—Ö —ñ–≥–æ—Ä. –í–æ–Ω–∞ –Ω–∞–¥–∞—î –≥–ª–∏–±–∏–Ω—É —á–µ—Ä–µ–∑ D&D-–º–µ—Ö–∞–Ω—ñ–∫–∏, —Å—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω—ñ—Å—Ç—å —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –µ–Ω–µ—Ä–≥—ñ—ó —Ç–∞ –¥–∏–Ω–∞–º—ñ–∫—É —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –∫–∞—Ä—Ç–æ–∫ Pokemon-—Å—Ç–∏–ª—é. 

–°–∏—Å—Ç–µ–º–∞ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∞–∫—Ç–∏–≤–Ω—ñ–π —Ä–æ–∑—Ä–æ–±—Ü—ñ —Ç–∞ –º–∞—î –∫—ñ–ª—å–∫–∞ –æ–±–ª–∞—Å—Ç–µ–π –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è, –∞–ª–µ –≤–∂–µ –∑–∞–±–µ–∑–ø–µ—á—É—î —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π —Ç–∞ —Ü—ñ–∫–∞–≤–∏–π —ñ–≥—Ä–æ–≤–∏–π –¥–æ—Å–≤—ñ–¥.

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–∞: 2024*
*–í–µ—Ä—Å—ñ—è —Å–∏—Å—Ç–µ–º–∏: 1.0 (Turn-Based Battle System)*
